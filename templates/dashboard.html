{% extends 'base.html' %}

{% block content %}
<main class="dashboard-layout">
    <!-- Left Column: Hero -->
    <section class="hero-section">
        <div class="hero-content">
            <section class="hero">
                {% if announcement %}
                <h1 class="hero-announcement-title">{{ announcement.title }}</h1>
                <p class="hero-announcement-text">{{ announcement.content }}</p>
                {% elif hero_phrase %}
                <h1>“{{ hero_phrase.text }}”</h1>
                {% if hero_phrase.author %}
                <p class="author">- {{ hero_phrase.author }}</p>
                {% endif %}
                {% else %}
                <h1>Holi</h1>
                {% endif %}

                {% if user.is_staff %}
                <div style="position: absolute; top: 20px; right: 20px; opacity: 0.5;">
                    <a href="{% url 'manage_announcements' %}"
                        style="text-decoration:none; color: white; font-size: 0.8rem; background: rgba(0,0,0,0.2); padding: 5px 10px; border-radius: 20px;">⚙️</a>
                </div>
                {% endif %}
            </section>
            <div class="hero-footer">
                <a href="{% url 'logout' %}" class="btn-text">Salir</a>
                <!-- Theme toggle removed -->
            </div>
        </div>
    </section>

    <!-- Right Column: Content Grid -->
    <section class="content-grid">

        <!-- Navigation Cards -->
        <a href="{% url 'gallery_index' %}" class="widget nav-card">
            <h3>Galería</h3>
            <p>Fotos y Recuerdos</p>
        </a>

        <a href="{% url 'watchlist_index' %}" class="widget nav-card">
            <h3>Cosas para ver</h3>
            <p>Películas y Series</p>
        </a>

        <a href="{% url 'notes_index' %}" class="widget nav-card">
            <h3>Notas</h3>
            <p>Ideas y Listas</p>
        </a>

        <!-- Chat Widget (Kept on Dashboard) -->
        <div class="widget chat-widget">
            <div class="widget-header">
                <h3>Chat</h3>
            </div>
            <div class="chat-messages" id="chat-messages">
                <!-- Messages loaded via JS -->
            </div>
            <div class="chat-input-area">
                <label for="chat-file" class="chat-btn" title="Adjuntar foto">///</label>
                <input type="file" id="chat-file" accept="image/*" style="display:none;" onchange="previewImage()">
                <input type="text" id="chat-input" placeholder="Escribe un mensaje...">
                <button onclick="sendMessage()" class="chat-btn send-btn">➤</button>
            </div>
            <div id="image-preview-container" style="display:none; padding: 0 10px 10px;">
                <img id="image-preview" class="chat-image-preview">
                <button onclick="clearImage()"
                    style="background:none; border:none; color:red; cursor:pointer;">×</button>
            </div>
        </div>

    </section>
</main>
{% endblock %}